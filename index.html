<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- ä¿®æ”¹ï¼šç½‘ç«™æ ‡é¢˜ -->
    <title>ZXYè§†é¢‘ç½‘ç«™ - åœ¨çº¿è§†é¢‘è§£æ</title>
    <meta name="description" content="ZXYè§†é¢‘ç½‘ç«™æä¾›ç®€æ´é«˜æ•ˆçš„åœ¨çº¿è§†é¢‘è§£æå·¥å…·ï¼Œæ”¯æŒä¸»æµè§†é¢‘å¹³å°ã€‚">
    <meta name="keywords" content="ZXYè§†é¢‘, è§†é¢‘è§£æ, åœ¨çº¿è§£æ, VIPè§†é¢‘è§£æ, å…å¹¿å‘Šçœ‹è§†é¢‘">
    <!-- Preload Fonts and Icons for performance -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" as="style" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" as="style">

    <!-- Fonts and Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- CSS Reset & Base Styles --- */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --primary-color: #007BFF; /* ä¿æŒè“è‰²ä¸»è°ƒ */
            --secondary-color: #0056b3; /* æ·±è“è‰² */
            --accent-color: #28a745; /* ç»¿è‰² */
            --warning-color: #ffc107; /* é»„è‰² */
            --danger-color: #dc3545; /* çº¢è‰² */
            /* ä¿®æ”¹ï¼šèƒŒæ™¯è‰²è°ƒæ•´ */
            --light-bg: #f8f9fa; /* éå¸¸æµ…çš„ç°è‰²ä½œä¸ºé¡µé¢åº•è‰² */
            --text-color: #343a40; /* æ·±ç°è‰²æ–‡æœ¬ */
            --text-light: #6c757d; /* æµ…ç°è‰²æ–‡æœ¬ */
            --border-color: #dee2e6;
            --card-bg: #ffffff; /* å¡ç‰‡å’Œå®¹å™¨ä½¿ç”¨çº¯ç™½è‰² */
            /* ä¿®æ”¹ï¼šé˜´å½±è°ƒæ•´ */
            --shadow-color: rgba(0, 0, 0, 0.08); /* æ›´æŸ”å’Œçš„é˜´å½± */
            --animation-speed: 0.3s;
            --border-radius: 12px; /* åœ†è§’ä¿æŒ */
            --restricted-interface-bg: rgba(255, 193, 7, 0.1);
            --restricted-interface-color: #b98900;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            color: var(--text-color);
            /* ä¿®æ”¹ï¼šä½¿ç”¨æµ…ç°è‰²èƒŒæ™¯ */
            background-color: var(--light-bg);
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* é¡¶éƒ¨å¯¹é½ */
            min-height: 100vh;
            padding: 2rem 1rem;
            overflow-x: hidden;
        }

        /* --- Main Container --- */
        .container {
            width: 100%;
            max-width: 900px;
            /* ä¿®æ”¹ï¼šçº¯ç™½èƒŒæ™¯ï¼Œç§»é™¤é€æ˜å’Œæ¨¡ç³Š */
            background-color: var(--card-bg);
            padding: 3rem; /* ç¨å¾®å¢åŠ å†…è¾¹è· */
            border-radius: var(--border-radius);
            /* ä¿®æ”¹ï¼šä½¿ç”¨è°ƒæ•´åçš„æŸ”å’Œé˜´å½± */
            box-shadow: 0 8px 25px var(--shadow-color);
            /* ç§»é™¤ backdrop-filter å’Œç›¸å…³ border */
            animation: fadeInScale 0.8s ease-out forwards;
            opacity: 0;
            transform: scale(0.95);
        }

        @keyframes fadeInScale {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* --- Typography --- */
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 2rem; /* å¢åŠ  H1 ä¸‹æ–¹é—´è· */
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        h2 {
            color: var(--secondary-color);
            margin-top: 2.5rem; /* å¢åŠ  H2 ä¸Šæ–¹é—´è· */
            margin-bottom: 1.2rem;
            font-weight: 500;
            padding-bottom: 0.6rem;
            border-bottom: 2px solid var(--border-color);
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        strong {
            color: var(--text-color);
            font-weight: 500;
        }

        /* --- Buttons --- */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            color: #fff;
            background-color: var(--primary-color);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all var(--animation-speed) ease;
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0, 123, 255, 0.2); /* ç¨å¾®å‡å¼±é˜´å½± */
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn:hover {
            background-color: var(--secondary-color);
            box-shadow: 0 6px 15px rgba(0, 86, 179, 0.3);
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 86, 179, 0.2);
        }

        .btn:disabled {
            background-color: #adb5bd;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        /* Ripple effect */
        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 50%;
            transform: scale(1, 1) translate(-50%, -50%);
            transform-origin: 50% 50%;
            z-index: -1;
        }

        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }

        @keyframes ripple {
            0% { transform: scale(0, 0) translate(-50%, -50%); opacity: 1; }
            100% { transform: scale(40, 40) translate(-50%, -50%); opacity: 0; }
        }

        .platform-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 2.5rem; /* å¢åŠ ä¸‹æ–¹é—´è· */
        }

        .platform-btn {
            flex-grow: 1;
            min-width: 120px;
        }

        /* --- Form Elements --- */
        .parser-form {
            display: grid;
            gap: 1.2rem; /* ç¨å¾®å¢åŠ è¡¨å•å…ƒç´ é—´è· */
            margin-bottom: 2rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            margin-bottom: 0.6rem; /* å¢åŠ æ ‡ç­¾å’Œè¾“å…¥æ¡†é—´è· */
            font-weight: 500;
            color: var(--text-color);
        }

        .form-control {
            width: 100%;
            padding: 0.8rem 1rem;
            background-color: #fff; /* ç¡®ä¿è¾“å…¥æ¡†èƒŒæ™¯ä¹Ÿæ˜¯ç™½è‰² */
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-color);
            font-size: 1rem;
            font-family: inherit;
            transition: border-color var(--animation-speed) ease, box-shadow var(--animation-speed) ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.15); /* å‡å¼±ç„¦ç‚¹é˜´å½± */
        }

        select.form-control {
            appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%236c757d" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1em;
            padding-right: 3rem;
        }

        .form-control option.restricted-mobile {
            background-color: var(--restricted-interface-bg);
            color: var(--restricted-interface-color);
            font-style: italic;
        }

        .parser-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .parser-actions .btn {
            flex-grow: 1;
        }

        /* --- Instructions Box --- */
        .instructions {
            /* ä¿®æ”¹ï¼šè°ƒæ•´èƒŒæ™¯è‰²ä»¥é€‚åº”ç™½è‰²ä¸»é¢˜ */
            background-color: #eef2f7; /* æ›´ä¸­æ€§çš„æµ…è“ç°è‰² */
            border-left: 5px solid var(--primary-color);
            padding: 1.5rem;
            margin-bottom: 2.5rem;
            border-radius: 8px;
            font-size: 0.95rem;
        }
        .instructions p:last-child { margin-bottom: 0; }
        .instructions strong { color: var(--primary-color); }
        .instructions ol { padding-left: 1.5rem; margin-bottom: 1rem; }


        /* --- Video Player --- */
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 */
            border-radius: var(--border-radius);
            overflow: hidden;
            background-color: #000;
            margin-top: 2rem; /* å¢åŠ ä¸Šæ–¹é—´è· */
            display: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); /* ä¿ç•™ä¸€ç‚¹é˜´å½± */
            animation: fadeIn 0.5s ease;
        }

        .video-iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* --- Status Messages --- */
        .status-message {
            text-align: center;
            padding: 0.8rem 1rem;
            border-radius: 8px;
            margin-top: 1.5rem; /* å¢åŠ ä¸Šæ–¹é—´è· */
            display: none;
            font-weight: 500;
            animation: slideDown 0.3s ease-out;
            border: 1px solid transparent;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .status-loading,
        .status-testing {
            background-color: rgba(255, 193, 7, 0.1);
            color: #b98900;
            border-color: rgba(255, 193, 7, 0.3);
        }
        .status-error {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--danger-color);
            border-color: rgba(220, 53, 69, 0.3);
        }
        .status-success {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--accent-color);
            border-color: rgba(40, 167, 69, 0.3);
        }

        /* --- Movie Site Cards --- */
        .movie-sites {
            margin-top: 3rem; /* å¢åŠ ä¸Šæ–¹é—´è· */
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem; /* å¢åŠ ä¸Šæ–¹é—´è· */
        }

        .movie-card {
            background-color: var(--card-bg); /* ç¡®ä¿å¡ç‰‡èƒŒæ™¯æ˜¯ç™½è‰² */
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 5px 15px var(--shadow-color); /* ä½¿ç”¨æŸ”å’Œé˜´å½± */
            transition: transform var(--animation-speed) ease, box-shadow var(--animation-speed) ease;
            text-decoration: none;
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border-color); /* æ·»åŠ ç»†å¾®è¾¹æ¡† */
        }

        .movie-card:hover {
            transform: translateY(-5px) scale(1.02); /* ç¨å¾®å‡å°æ”¾å¤§æ•ˆæœ */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* æ‚¬åœæ—¶é˜´å½±åŠ æ·± */
        }

        .movie-card-image {
            height: 120px;
            /* ä¿®æ”¹ï¼šä½¿ç”¨æµ…ç°è‰²èƒŒæ™¯æ›¿ä»£æ¸å˜ */
            background-color: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            /* ä¿®æ”¹ï¼šå›¾æ ‡é¢œè‰²è°ƒæ•´ */
            color: var(--text-light);
            font-size: 2.5rem; /* ç¨å¾®å¢å¤§å›¾æ ‡ */
        }

        .movie-card-content {
            padding: 1rem;
            text-align: center;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .movie-card-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            font-size: 1.1rem;
            color: var(--primary-color);
        }

        .movie-card-link {
            font-size: 0.85rem;
            color: var(--text-light);
            word-break: break-all;
        }

        .movie-warning {
            margin-top: 1rem;
            padding: 1rem;
            background-color: rgba(255, 193, 7, 0.1);
            color: #b98900;
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 8px;
            font-size: 0.9rem;
            text-align: center;
        }
        .movie-warning i { margin-right: 0.5rem; }

        /* --- Footer --- */
        footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
            font-size: 0.9em;
            color: var(--text-light);
        }

        /* --- Accessibility --- */
        .sr-only { /* ä¿æŒä¸å˜ */ }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            body { padding: 1.5rem 0.8rem; }
            .container { padding: 2rem 1.5rem; }
            h1 { font-size: 1.8rem; }
            .platform-buttons { flex-direction: column; }
            .platform-btn { width: 100%; }
            .parser-actions { flex-direction: column; }
             .parser-actions .btn { width: 100%; }
            .card-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; }
            .movie-card-title { font-size: 1rem; }
        }

         @media (max-width: 480px) {
             body { padding: 1rem 0.5rem; }
             .container { padding: 1.5rem 1rem; }
             h1 { font-size: 1.6rem; }
             .btn { padding: 0.7rem 1.3rem; font-size: 0.95rem; }
             .form-control { padding: 0.7rem 0.9rem; font-size: 0.95rem; }
              .card-grid { grid-template-columns: 1fr 1fr; }
            .movie-card-image { height: 100px; font-size: 2rem; }
         }

    </style>
</head>
<body>

    <main class="container">
        <!-- ä¿®æ”¹ï¼šç½‘ç«™ H1 æ ‡é¢˜ -->
        <h1><i class="fas fa-film fa-fw"></i> ZXYè§†é¢‘ç½‘ç«™</h1>

        <nav class="platform-buttons" aria-label="è§†é¢‘å¹³å°å¯¼èˆª">
            <a href="https://v.qq.com/" target="_blank" rel="noopener noreferrer" class="btn platform-btn" title="è®¿é—®è…¾è®¯è§†é¢‘å®˜ç½‘">
                <i class="fab fa-qq" aria-hidden="true"></i> è…¾è®¯è§†é¢‘
            </a>
            <a href="https://www.iqiyi.com/" target="_blank" rel="noopener noreferrer" class="btn platform-btn" title="è®¿é—®çˆ±å¥‡è‰ºå®˜ç½‘">
                <i class="fas fa-play-circle" aria-hidden="true"></i> çˆ±å¥‡è‰º
            </a>
            <a href="https://www.bilibili.com/" target="_blank" rel="noopener noreferrer" class="btn platform-btn" title="è®¿é—®å“”å“©å“”å“©å®˜ç½‘">
                <i class="fas fa-tv" aria-hidden="true"></i> Bilibili
            </a>
            <!-- ä½ å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ›´å¤šå¹³å°æŒ‰é’® -->
        </nav>

        <section class="instructions" aria-labelledby="instructions-heading">
            <h2 id="instructions-heading" class="sr-only">ä½¿ç”¨è¯´æ˜</h2>
            <p><strong><i class="fas fa-info-circle fa-fw"></i> å¦‚ä½•ä½¿ç”¨:</strong></p>
            <ol>
                <li>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å‰å¾€è§†é¢‘å¹³å°ï¼Œæˆ–ç›´æ¥æ‰“å¼€è§†é¢‘ç½‘ç«™ã€‚</li>
                <li>æ‰¾åˆ°æƒ³çœ‹çš„è§†é¢‘ï¼Œå¤åˆ¶æµè§ˆå™¨åœ°å€æ ä¸­çš„å®Œæ•´é“¾æ¥ (URL)ã€‚</li>
                <li>è¿”å›æœ¬é¡µé¢ï¼Œå°†é“¾æ¥ç²˜è´´åˆ°ä¸‹æ–¹çš„è¾“å…¥æ¡†ä¸­ã€‚</li>
                <li>é€‰æ‹©ä¸€ä¸ªè§£ææ¥å£ï¼ˆæ¨èç‚¹å‡»â€œè‡ªåŠ¨æµ‹è¯•â€ï¼‰ã€‚</li>
                <li>ç‚¹å‡»â€œç«‹å³è§£æâ€æŒ‰é’®ï¼Œç¨ç­‰ç‰‡åˆ»å³å¯æ’­æ”¾ã€‚</li>
            </ol>
            <p><strong>æ³¨æ„ï¼š</strong> è‹¥æ’­æ”¾å¤±è´¥æˆ–å¡é¡¿ï¼Œè¯·å°è¯•åˆ‡æ¢å…¶ä»–è§£ææ¥å£ã€‚æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ äº¤æµï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚</p>
        </section>

        <section class="parser-form" aria-labelledby="parser-heading">
            <h2 id="parser-heading" class="sr-only">è§†é¢‘è§£æå™¨</h2>
            <div class="form-group">
                <label for="parserInterface" class="form-label"><i class="fas fa-server fa-fw"></i> è§£ææ¥å£:</label>
                <!--
                    ä¿®æ”¹/æ·»åŠ /åˆ é™¤ è§£ææ¥å£:
                    1. å¤åˆ¶ä¸‹é¢çš„ä¸€ä¸ª <option> ... </option> æ ‡ç­¾è¡Œã€‚
                    2. ä¿®æ”¹ value="æ¥å£åœ°å€" ä¸­çš„ "æ¥å£åœ°å€"ï¼Œç¡®ä¿åœ°å€ä»¥ "?url=" æˆ–ç±»ä¼¼çš„å‚æ•°ç»“å°¾ã€‚è¿™æ˜¯å®é™…ä½¿ç”¨çš„æ¥å£é“¾æ¥ã€‚
                    3. ä¿®æ”¹ > å’Œ </option> ä¹‹é—´çš„æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸‹æ‹‰åˆ—è¡¨ä¸­æ˜¾ç¤ºçš„åç§°ã€‚
                    4. (å¯é€‰) å¦‚æœæŸä¸ªæ¥å£åœ¨æ‰‹æœºä¸Šå¯èƒ½æœ‰é—®é¢˜ï¼ˆå¦‚å¹¿å‘Šè¿‡å¤šã€å…¼å®¹æ€§å·®ï¼‰ï¼Œå¯ä»¥æ·»åŠ  data-restricted-mobile="true" å±æ€§ï¼ŒJS ä¼šåœ¨æ‰‹æœºè®¿é—®æ—¶ç»™å‡ºæç¤ºã€‚
                    5. è¦åˆ é™¤æ¥å£ï¼Œç›´æ¥åˆ é™¤å¯¹åº”çš„ <option> ... </option> è¡Œå³å¯ã€‚
                    æ³¨æ„ï¼šè¯·ç¡®ä¿æ¥å£åœ°å€æ˜¯çœŸå®æœ‰æ•ˆçš„ï¼ä»¥ä¸‹ä»…ä¸ºç¤ºä¾‹ã€‚
                -->
                <select id="parserInterface" class="form-control" aria-describedby="interface-description">
                    <option value="https://jx.xmflv.com/?url=" data-restricted-mobile="true">æ¥å£ 1 (xmflv.com) æ‰‹æœºæ…ç”¨</option>
                    <option value="https://bd.jx.cn/?url=">æ¥å£ 2 (bd.jx.cn)</option>
                    <option value="https://jx.xmflv.cc/?url=" data-restricted-mobile="true">æ¥å£ 3 (xmflv.cc) æ‰‹æœºæ…ç”¨</option>
                    <option value="https://jx.hls.one/?url=">æ¥å£ 4 (hls.one)</option>
                    <option value="https://jx.77flv.cc/?url=">æ¥å£ 5 (77flv.cc)</option>
                    <option value="https://www.yemu.xyz/?url=" data-restricted-mobile="true">æ¥å£ 6 (yemu.xyz) æ‰‹æœºæ…ç”¨</option>
                    <!-- åœ¨è¿™é‡Œæ·»åŠ æ–°çš„æ¥å£ -->
                </select>
                <small id="interface-description" class="text-light" style="margin-top: 0.3rem;">å¸¦ <i class="fas fa-mobile-alt fa-fw"></i> æ ‡è®°çš„æ¥å£åœ¨æ‰‹æœºç«¯å¯èƒ½ä½“éªŒä¸ä½³ã€‚</small>
            </div>

            <div class="form-group">
                <label for="videoUrl" class="form-label"><i class="fas fa-link fa-fw"></i> è§†é¢‘é“¾æ¥:</label>
                <input type="url" id="videoUrl" class="form-control" placeholder="è¯·åœ¨æ­¤å¤„ç²˜è´´è§†é¢‘æ’­æ”¾é¡µé¢çš„å®Œæ•´é“¾æ¥..." required autocomplete="off">
            </div>

            <div class="parser-actions">
                <button class="btn" type="button" id="autoTestButton" title="è‡ªåŠ¨æµ‹è¯•æŸ¥æ‰¾å¯ç”¨æ¥å£">
                    <i class="fas fa-magic fa-fw" aria-hidden="true"></i> è‡ªåŠ¨æµ‹è¯•
                </button>
                <button class="btn" type="button" id="parseButton" title="ä½¿ç”¨é€‰å®šæ¥å£è§£æè§†é¢‘">
                    <i class="fas fa-play fa-fw" aria-hidden="true"></i> ç«‹å³è§£æ
                </button>
            </div>
        </section>

        <!-- Status Messages Area -->
        <div class="status-message status-loading" id="loadingMessage" role="status" aria-live="polite"><i class="fas fa-spinner fa-spin fa-fw"></i> è§£æä¸­ï¼Œè¯·ç¨å€™...</div>
        <div class="status-message status-testing" id="testingInterfaceMessage" role="status" aria-live="polite"><i class="fas fa-vial fa-fw"></i> æ­£åœ¨è‡ªåŠ¨æµ‹è¯•æ¥å£...</div>
        <div class="status-message status-success" id="successMessage" role="status" aria-live="polite"><i class="fas fa-check-circle fa-fw"></i> æ¥å£æµ‹è¯•æˆåŠŸï¼Œå·²é€‰æ‹©å¯ç”¨æ¥å£ï¼</div>
        <div class="status-message status-error" id="errorMessage" role="alert" aria-live="assertive"><i class="fas fa-exclamation-triangle fa-fw"></i> <span id="errorText">å‘ç”Ÿé”™è¯¯</span></div>

        <!-- Video Player Container -->
        <div class="video-container" id="videoContainer">
            <iframe class="video-iframe" id="videoPlayer" title="è§†é¢‘æ’­æ”¾å™¨" allow="autoplay; fullscreen" allowfullscreen sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
        </div>

        <!-- Movie Site Recommendations -->
        <section class="movie-sites" aria-labelledby="movie-sites-heading">
            <h2 id="movie-sites-heading"><i class="fas fa-tv fa-fw"></i> å…è´¹å½±è§†ç«™ç‚¹æ¨è</h2>
            <div class="movie-warning">
                <i class="fas fa-exclamation-triangle"></i> <strong>æ³¨æ„:</strong> ä»¥ä¸‹ç½‘ç«™éæœ¬ç«™æ‰€æœ‰ï¼Œå†…å®¹å¯èƒ½åŒ…å«å¹¿å‘Šã€å¼¹çª—æˆ–æ½œåœ¨é£é™©ï¼Œè¯·è°¨æ…è®¿é—®å’Œä½¿ç”¨ï¼
            </div>
             <!--
                ä¿®æ”¹/æ·»åŠ /åˆ é™¤ æ¨èç½‘ç«™:
                1. å¤åˆ¶ä¸‹é¢çš„ä¸€ä¸ª <a ... </a> æ ‡ç­¾å— (ä» <a href=...> å¼€å§‹ï¼Œåˆ° </a> ç»“æŸ)ã€‚
                2. ä¿®æ”¹ href="ç½‘ç«™é“¾æ¥" ä¸­çš„ "ç½‘ç«™é“¾æ¥"ã€‚
                3. ä¿®æ”¹ <div class="movie-card-image"><i class="å›¾æ ‡ç±»å"></i></div> ä¸­çš„ "å›¾æ ‡ç±»å"ã€‚ä½ å¯ä»¥ä» Font Awesome å®˜ç½‘ (fontawesome.com) æŸ¥æ‰¾å…è´¹å›¾æ ‡ï¼Œä¾‹å¦‚ fas fa-film, fas fa-video, fas fa-desktop ç­‰ã€‚
                4. ä¿®æ”¹ <h3 class="movie-card-title">ç½‘ç«™åç§°</h3> ä¸­çš„ "ç½‘ç«™åç§°"ã€‚
                5. ä¿®æ”¹ <span class="movie-card-link">ç½‘ç«™åŸŸå</span> ä¸­çš„ "ç½‘ç«™åŸŸå" (é€šå¸¸å’Œé“¾æ¥ä¸€è‡´)ã€‚
                6. è¦åˆ é™¤ç½‘ç«™æ¨èï¼Œç›´æ¥åˆ é™¤å¯¹åº”çš„ <a ... </a> å—å³å¯ã€‚
            -->
            <div class="card-grid">
                <!-- æ¨èç½‘ç«™ 1 -->
                <a href="https://vip1280.net/" target="_blank" rel="noopener noreferrer" class="movie-card">
                    <div class="movie-card-image"><i class="fas fa-film"></i></div>
                    <div class="movie-card-content">
                        <h3 class="movie-card-title">å½±è§†ç«™ 1</h3>
                        <span class="movie-card-link">vip1280.net</span>
                    </div>
                </a>
                <!-- æ¨èç½‘ç«™ 2 -->
                <a href="https://wniutv.com/" target="_blank" rel="noopener noreferrer" class="movie-card">
                    <div class="movie-card-image"><i class="fas fa-video"></i></div>
                    <div class="movie-card-content">
                        <h3 class="movie-card-title">å½±è§†ç«™ 2</h3>
                        <span class="movie-card-link">wniutv.com</span>
                    </div>
                </a>
                <!-- æ¨èç½‘ç«™ 3 -->
                <a href="https://www.hainatv.net/" target="_blank" rel="noopener noreferrer" class="movie-card">
                     <div class="movie-card-image"><i class="fas fa-desktop"></i></div>
                    <div class="movie-card-content">
                        <h3 class="movie-card-title">å½±è§†ç«™ 3</h3>
                        <span class="movie-card-link">hainatv.net</span>
                    </div>
                </a>
                <!-- æ¨èç½‘ç«™ 4 -->
                <a href="https://www.yfsp.lv/" target="_blank" rel="noopener noreferrer" class="movie-card">
                     <div class="movie-card-image"><i class="fas fa-compact-disc"></i></div>
                    <div class="movie-card-content">
                        <h3 class="movie-card-title">å½±è§†ç«™ 4</h3>
                        <span class="movie-card-link">yfsp.lv</span>
                    </div>
                </a>
                <!-- åœ¨è¿™é‡Œæ·»åŠ æ–°çš„æ¨èç½‘ç«™å¡ç‰‡ -->

            </div>
        </section>


        <footer>
            <p>å…è´£å£°æ˜ï¼šæœ¬ç«™ä»…æä¾›è§†é¢‘è§£ææŠ€æœ¯å­¦ä¹ ä¸æ¼”ç¤ºï¼Œä¸å­˜å‚¨ä»»ä½•è§†é¢‘èµ„æºã€‚æ‰€æœ‰è§£æç»“æœå‡æ¥è‡ªç¬¬ä¸‰æ–¹æ¥å£ï¼Œæœ¬ç«™ä¸å¯¹å…¶å†…å®¹å’Œå¯ç”¨æ€§è´Ÿè´£ã€‚è¯·å‹¿å°†æœ¬ç«™ç”¨äºä»»ä½•å•†ä¸šæˆ–éæ³•ç”¨é€”ï¼Œå¦åˆ™åæœè‡ªè´Ÿã€‚</p>
            <!-- ä¿®æ”¹ï¼šç½‘ç«™é¡µè„šç‰ˆæƒ -->
            <p>&copy; 2024 ZXYè§†é¢‘ç½‘ç«™. All Rights Reserved.</p>
        </footer>
    </main>

<script>
(function() {
    'use strict';

    // --- Configuration ---
    const isMobile = /Mobi|Android/i.test(navigator.userAgent);
    const interfaceTestTimeout = 6000; // Timeout for interface testing (ms)
    // ä» HTML çš„ <option> æ ‡ç­¾ä¸­è·å–æ ‡è®°ä¸º data-restricted-mobile="true" çš„æ¥å£ value
    const restrictedMobileInterfaces = Array.from(document.querySelectorAll('#parserInterface option[data-restricted-mobile="true"]'))
                                           .map(option => option.value);
    // Mark interfaces known to sometimes require loading the URL twice
    // !! è¯·æ ¹æ®å®é™…æµ‹è¯•æƒ…å†µè°ƒæ•´è¿™ä¸ªåˆ—è¡¨ !!
    const doubleParseInterfaces = [
        // "https://jx.xmflv.com/?url=", // ç¤ºä¾‹ï¼Œå¦‚æœéœ€è¦åŒé‡åŠ è½½åˆ™å–æ¶ˆæ³¨é‡Š
        // "https://jx.xmflv.cc/?url=", // ç¤ºä¾‹
        // "https://www.yemu.xyz/?url=", // ç¤ºä¾‹
    ];
    // è®¾ç½®ä¸€ä¸ªåœ¨ç§»åŠ¨ç«¯ç›¸å¯¹å®‰å…¨çš„é»˜è®¤æ¥å£ (ç¡®ä¿è¿™ä¸ª value åœ¨ <select> ä¸­å­˜åœ¨)
    const defaultMobileInterface = "https://bd.jx.cn/?url="; // ç¤ºä¾‹ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©

    // --- DOM Elements ---
    const interfaceSelect = document.getElementById('parserInterface');
    const videoUrlInput = document.getElementById('videoUrl');
    const parseButton = document.getElementById('parseButton');
    const autoTestButton = document.getElementById('autoTestButton');
    const videoContainer = document.getElementById('videoContainer');
    const videoPlayer = document.getElementById('videoPlayer');
    const loadingMessage = document.getElementById('loadingMessage');
    const testingMessage = document.getElementById('testingInterfaceMessage');
    const successMessage = document.getElementById('successMessage');
    const errorMessage = document.getElementById('errorMessage');
    const errorText = document.getElementById('errorText');

    // --- Core Parsing Logic ---
    let currentParseTimeout = null; // Timeout ID for iframe loading

    /**
     * Loads URL into iframe, handling timeout and errors.
     * @param {string} interfaceUrl - Base URL of the parsing interface.
     * @param {string} videoUrl - Full URL of the video to parse.
     * @returns {Promise<void>} Resolves on successful load, rejects on error/timeout.
     */
    function _loadVideoInIframe(interfaceUrl, videoUrl) {
        return new Promise((resolve, reject) => {
            clearTimeout(currentParseTimeout);
            const parsedUrl = interfaceUrl + encodeURIComponent(videoUrl);
            console.log(`Attempting to load: ${parsedUrl}`);
            videoPlayer.src = 'about:blank'; // Clear previous content

            setTimeout(() => { videoPlayer.src = parsedUrl; }, 50); // Slight delay

            videoContainer.style.display = 'block'; // Show container early

            let resolved = false; // Flag to prevent double resolution/rejection
            const timeoutId = setTimeout(() => {
                if (resolved) return;
                resolved = true;
                console.warn(`Iframe timeout for ${parsedUrl}`);
                removeListeners();
                videoPlayer.src = 'about:blank';
                reject(new Error(`è§£æè¶…æ—¶ (${interfaceTestTimeout / 1000}ç§’)ï¼Œè¯·å°è¯•å…¶ä»–æ¥å£ã€‚`));
            }, interfaceTestTimeout);

            currentParseTimeout = timeoutId; // Store timeout ID globally for potential clearing

            const onLoad = () => {
                if (resolved) return;
                // Sometimes 'load' fires even on failure (e.g., blocked frame), add a small check
                try {
                    // Accessing contentDocument might fail for cross-origin iframes that didn't load properly
                     if (videoPlayer.contentDocument && videoPlayer.contentDocument.readyState === 'complete') {
                          console.log(`Iframe loaded successfully: ${parsedUrl}`);
                     } else if (videoPlayer.contentWindow && videoPlayer.contentWindow.length > 0) {
                         // If it has some content window elements, might be okay
                         console.log(`Iframe loaded (basic check passed): ${parsedUrl}`);
                     }
                     else {
                         // If contentDocument access fails or readyState isn't complete, it might still be loading or blocked
                         console.log(`Iframe 'load' event fired, but content seems inaccessible or not ready: ${parsedUrl}`);
                         // We might still resolve here, relying on the timeout for definite failures
                     }
                } catch (e) {
                    console.warn(`Iframe 'load' event fired but content access failed (likely cross-origin block on failure): ${parsedUrl}`, e);
                    // Resolve anyway, let the user see if it works. Timeout handles catastrophic failures.
                }
                 resolved = true;
                 clearTimeout(timeoutId);
                 removeListeners();
                 resolve();
            };

            const onError = (event) => {
                if (resolved) return;
                resolved = true;
                console.error(`Iframe error for ${parsedUrl}:`, event);
                clearTimeout(timeoutId);
                removeListeners();
                reject(new Error('è§£ææ¥å£åŠ è½½å¤±è´¥ï¼Œå¯èƒ½æ˜¯æ¥å£å¤±æ•ˆæˆ–ç½‘ç»œé—®é¢˜ã€‚'));
            };

            const removeListeners = () => {
                videoPlayer.removeEventListener('load', onLoad);
                videoPlayer.removeEventListener('error', onError);
            };

            videoPlayer.addEventListener('load', onLoad);
            videoPlayer.addEventListener('error', onError);
        });
    }


    /**
     * Main function to parse the video using a selected interface.
     * @param {string} interfaceUrl - The selected parsing interface URL.
     * @returns {Promise<void>} Resolves if parsing initiates successfully. Rejects on failure.
     */
    async function parseVideo(interfaceUrl) {
        const videoUrl = videoUrlInput.value.trim();
        hideAllStatusMessages();

        if (!videoUrl) {
            showError('è¯·è¾“å…¥æœ‰æ•ˆçš„è§†é¢‘é“¾æ¥ï¼');
            return Promise.reject(new Error('No video URL'));
        }

        let fullUrl = videoUrl;
        if (!videoUrl.startsWith('http://') && !videoUrl.startsWith('https://')) {
            fullUrl = `https://${videoUrl}`; // Simple protocol prepending
            console.log(`Prepended https:// to URL: ${fullUrl}`);
        }

        disableButtons(true);
        showLoading();

        try {
            // Double parsing logic (if needed for specific interfaces)
            if (doubleParseInterfaces.includes(interfaceUrl)) {
                console.log(`Using double parse for interface: ${interfaceUrl}`);
                try {
                    await _loadVideoInIframe(interfaceUrl, fullUrl);
                    // Optional delay: await new Promise(resolve => setTimeout(resolve, 300));
                    console.log("First parse attempt finished, starting second...");
                    await _loadVideoInIframe(interfaceUrl, fullUrl);
                    console.log("Second parse attempt finished.");
                } catch (doubleParseError) {
                    console.error("Error during double parse:", doubleParseError);
                    throw doubleParseError; // Re-throw to be caught below
                }
            } else {
                console.log(`Using single parse for interface: ${interfaceUrl}`);
                await _loadVideoInIframe(interfaceUrl, fullUrl);
            }

            hideLoading();
            // Success is implied by video container showing and loading message hiding
            disableButtons(false);
            return Promise.resolve(); // Indicate success initiation

        } catch (err) {
            console.error('Parsing failed:', err);
            showError(err.message || 'è§£æè§†é¢‘æ—¶å‘ç”ŸæœªçŸ¥é”™è¯¯ã€‚');
            hideLoading();
            videoContainer.style.display = 'none'; // Hide container on definite error
            videoPlayer.src = 'about:blank';
            disableButtons(false);
            return Promise.reject(err); // Propagate rejection
        }
    }


    /**
     * Automatically tests available interfaces to find one that works.
     */
    async function autoTestInterfaces() {
        const videoUrl = videoUrlInput.value.trim();
        if (!videoUrl) {
            showError('è¯·å…ˆè¾“å…¥è§†é¢‘é“¾æ¥å†è¿›è¡Œæµ‹è¯•ï¼');
            return;
        }

        hideAllStatusMessages();
        showTestingInterface();
        disableButtons(true);

        // Get all options, filter out restricted ones if on mobile
        const options = Array.from(interfaceSelect.options);
        const interfacesToTest = options
            .filter(option => !(isMobile && restrictedMobileInterfaces.includes(option.value)))
            .map(option => ({ value: option.value, text: option.text }));

         if (interfacesToTest.length === 0) {
            showError('å½“å‰è®¾å¤‡æ²¡æœ‰å¯ç”¨çš„è‡ªåŠ¨æµ‹è¯•æ¥å£ã€‚');
            hideTestingInterface();
            disableButtons(false);
            return;
        }

        console.log("Starting auto-test with interfaces:", interfacesToTest.map(i => i.text));
        let bestInterface = null;

        for (const iface of interfacesToTest) {
            console.log(`Testing interface: ${iface.text} (${iface.value})`);
            testingMessage.innerHTML = `<i class="fas fa-vial fa-fw"></i> æ­£åœ¨æµ‹è¯•æ¥å£: ${iface.text}...`; // Update testing message

            try {
                // Use parseVideo which includes timeout and error handling
                // We need to provide a valid URL for testing, even if it's just the base
                await parseVideo(iface.value); // parseVideo now returns a promise
                // If parseVideo resolves without error, consider it successful for auto-test
                bestInterface = iface.value;
                console.log(`Interface ${iface.text} succeeded.`);
                break; // Stop testing on the first success
            } catch (error) {
                console.warn(`Interface ${iface.text} failed: ${error.message}`);
                // Hide video container immediately if this test fails
                videoContainer.style.display = 'none';
                videoPlayer.src = 'about:blank';
                // Continue to the next interface
            }
        }

        hideTestingInterface(); // Hide the "testing..." message

        if (bestInterface) {
            interfaceSelect.value = bestInterface;
            showSuccessMessage(); // Show success confirmation
            // The successful parseVideo call would have already displayed the video
            // Need to ensure buttons are enabled AFTER success message shows
             disableButtons(false);
        } else {
            showError('æ‰€æœ‰å¯ç”¨æ¥å£æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é“¾æ¥æˆ–æ‰‹åŠ¨é€‰æ‹©æ¥å£å°è¯•ã€‚');
            videoContainer.style.display = 'none'; // Ensure container is hidden if all fail
            videoPlayer.src = 'about:blank';
             disableButtons(false); // Re-enable buttons on failure too
        }
    }

    // --- UI Helper Functions ---
    function showLoading() { hideAllStatusMessages(); loadingMessage.style.display = 'block'; }
    function hideLoading() { loadingMessage.style.display = 'none'; }
    function showTestingInterface() { hideAllStatusMessages(); testingMessage.style.display = 'block'; testingMessage.innerHTML = '<i class="fas fa-vial fa-fw"></i> æ­£åœ¨è‡ªåŠ¨æµ‹è¯•æ¥å£...'; }
    function hideTestingInterface() { testingMessage.style.display = 'none'; }

    function showSuccessMessage() {
        hideAllStatusMessages();
        successMessage.style.display = 'block';
        setTimeout(() => { if (successMessage.style.display === 'block') successMessage.style.display = 'none'; }, 3500);
    }

    function showError(message) {
        hideAllStatusMessages();
        errorText.textContent = message;
        errorMessage.style.display = 'block';
        // Keep error message visible longer
        setTimeout(() => { if (errorMessage.style.display === 'block') errorMessage.style.display = 'none'; }, 7000);
    }

    function hideAllStatusMessages() {
        loadingMessage.style.display = 'none';
        testingMessage.style.display = 'none';
        successMessage.style.display = 'none';
        errorMessage.style.display = 'none';
    }

    function disableButtons(disabled) {
        parseButton.disabled = disabled;
        autoTestButton.disabled = disabled;
    }

    /**
     * Handles mobile confirmation logic.
     * @param {string} selectedValue - Value of the selected interface.
     * @returns {boolean} True if parsing should proceed, false otherwise.
     */
    function checkMobileRestriction(selectedValue) {
        if (isMobile && restrictedMobileInterfaces.includes(selectedValue)) {
            const selectedOptionText = interfaceSelect.options[interfaceSelect.selectedIndex]?.text || 'è¯¥æ¥å£';
            const confirmMessage = `æ‚¨å½“å‰ä½¿ç”¨çš„æ˜¯æ‰‹æœºç«¯ï¼Œé€‰æ‹©çš„ "${selectedOptionText}" å¯èƒ½åŒ…å«ä¸é€‚åˆæ‰‹æœºæµè§ˆçš„å†…å®¹æˆ–å¹¿å‘Šè¾ƒå¤šã€‚ç¡®å®šè¦ç»§ç»­ä½¿ç”¨å—ï¼Ÿ`;
            if (!confirm(confirmMessage)) {
                // Optionally reset to default if user cancels
                // interfaceSelect.value = defaultMobileInterface;
                return false; // Do not proceed
            }
        }
        return true; // Proceed
    }

    // --- Event Listeners ---
    function initEventListeners() {
        parseButton.addEventListener('click', () => {
            const selectedInterface = interfaceSelect.value;
            if (checkMobileRestriction(selectedInterface)) {
                 parseVideo(selectedInterface).catch(err => {
                    // Error already handled visually in parseVideo
                    console.log("Parse button click resulted in error (handled).");
                 });
            } else {
                console.log("Mobile restriction cancelled by user.");
                 // Ensure buttons are re-enabled if confirm is cancelled
                 disableButtons(false);
            }
        });

        autoTestButton.addEventListener('click', autoTestInterfaces);

        // Add listener to select change for visual feedback (mobile icon)
        interfaceSelect.addEventListener('change', () => {
            const selectedInterface = interfaceSelect.value;
            // Mark restricted options visually (can be done on init and change)
             Array.from(interfaceSelect.options).forEach(option => {
                 const iconSpan = option.querySelector('.mobile-indicator');
                 if (iconSpan) iconSpan.remove(); // Remove existing icon first

                 if (isMobile && restrictedMobileInterfaces.includes(option.value)) {
                     option.classList.add('restricted-mobile');
                     // Add icon using a span for better control if needed
                     // option.innerHTML += ' <span class="mobile-indicator" style="opacity:0.7;">ğŸ“±</span>';
                 } else {
                     option.classList.remove('restricted-mobile');
                 }
             });
             // No confirmation dialog on change, only on parse button click.
        });

        videoUrlInput.focus(); // Auto-focus URL input on load
    }

    // --- Initialization ---
    document.addEventListener('DOMContentLoaded', () => {
        // Apply mobile specific UI adjustments on load
        Array.from(interfaceSelect.options).forEach(option => {
             if (isMobile && restrictedMobileInterfaces.includes(option.value)) {
                 option.classList.add('restricted-mobile');
                 // Add icon/indicator directly to the option text for persistence
                 // The \u{1F4F5} is a mobile phone with arrow symbol. Adjust styling if needed.
                 // Check if icon already exists to prevent duplicates on potential re-runs
                 if (!option.textContent.includes('\u{1F4F5}')) {
                    option.textContent += ' \u{1F4F5}';
                 }
             }
         });

        // Set a safer default interface on mobile if the current default is restricted
        if (isMobile && restrictedMobileInterfaces.includes(interfaceSelect.value)) {
             // Check if defaultMobileInterface exists before setting it
             if (Array.from(interfaceSelect.options).some(opt => opt.value === defaultMobileInterface)) {
                interfaceSelect.value = defaultMobileInterface;
             }
        }

        initEventListeners();
        console.log("ZXY Video Parser Initialized. Mobile:", isMobile);
        console.log("Restricted Mobile Interfaces:", restrictedMobileInterfaces);
    });

})();
</script>

</body>
</html>
